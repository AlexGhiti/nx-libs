Description: Provide main Makefile for whole source tree
 By design this patch is not needed to be sent upstream.
Forwarded: not-needed
Author: Mike Gabriel <mike.gabriel@das-netzwerkteam.de>
Last-Update: 2011-12-31
--- /dev/null
+++ b/Makefile
@@ -0,0 +1,31 @@
+#!/usr/bin/make -f
+
+all: build
+
+build-lite:
+	cd nxcomp && autoconf && ./configure && $(MAKE)
+	cd nxproxy && autoconf && ./configure && $(MAKE)
+
+build-full:
+# in the full case, we rely on "magic" in the nx-X11 imake-based makefiles...
+	cd nxcomp && autoconf && ./configure
+	cd nxcompext && autoconf
+	cd nxcompshad && autoconf
+	cd nx-X11 && $(MAKE) World
+	cd nxproxy && autoconf && ./configure && $(MAKE)
+
+build:
+	if ! test -d nx-X11; then \
+	    $(MAKE) build-lite; \
+	else \
+	    $(MAKE) build-full; \
+	fi
+
+%:
+	$(MAKE) -C nxcomp $@
+	$(MAKE) -C nxproxy $@
+	if test -d nx-X11; then \
+	    $(MAKE) -C nxcompext $@; \
+	    $(MAKE) -C nxcompshad; \
+	    $(MAKE) -C nx-X11 $@; \
+	fi
