Description: Provide main Makefile for whole source tree
 By design this patch is not needed to be sent upstream.
Forwarded: not-needed
Author: Mike Gabriel <mike.gabriel@das-netzwerkteam.de>
Last-Update: 2011-12-31
--- /dev/null
+++ b/Makefile
@@ -0,0 +1,46 @@
+#!/usr/bin/make -f
+
+all: build
+
+build: build-arch build-indep
+
+clean:
+	if test -d nx-X11; then $(MAKE) -C nx-X11 $@; fi
+	if test -d nxcomp; then $(MAKE) -C nxcomp $@; fi
+	if test -d nxcompext; then $(MAKE) -C nxcompext $@; fi
+	if test -d nxcompshad; then $(MAKE) -C nxcompshad $@; fi
+	if test -d nxproxy; then $(MAKE) -C nxproxy $@; fi
+
+distclean:
+	if test -d nx-X11; then $(MAKE) -C nx-X11 $@; fi
+	if test -d nxcomp; then $(MAKE) -C nxcomp $@; fi
+	if test -d nxcompext; then $(MAKE) -C nxcompext $@; fi
+	if test -d nxcompshad; then $(MAKE) -C nxcompshad $@; fi
+	if test -d nxproxy; then $(MAKE) -C nxproxy $@; fi
+
+build-arch:
+	if test -d nx-X11; then \
+	    if test -d nxcomp; then cd nxcomp && autoconf; cd ..; fi; \
+	    if test -d nxcompext; then cd nxcompext && autoconf; cd ..; fi; \
+	    if test -d nxcompshad; then cd nxcompshad && autoconf; cd ..; fi; \
+	    cd nx-X11 && make World && cd ..; \
+	else \
+	    if test -d nxcomp; then cd nxcomp && autoconf && ./configure && make; cd ..; fi; \
+	fi
+	if test -d nxproxy; then cd nxproxy && autoconf && ./configure && make; cd ..; fi
+
+build-indep:
+
+install:
+	if test -d nx-X11; then $(MAKE) -C nx-X11 $@; fi
+	if test -d nxcomp; then $(MAKE) -C nxcomp $@; fi
+	if test -d nxcompext; then $(MAKE) -C nxcompext $@; fi
+	if test -d nxcompshad; then $(MAKE) -C nxcompshad $@; fi
+	if test -d nxproxy; then $(MAKE) -C nxproxy $@; fi
+
+uninstall:
+	if test -d nx-X11; then $(MAKE) -C nx-X11 $@; fi
+	if test -d nxcomp; then $(MAKE) -C nxcomp $@; fi
+	if test -d nxcompext; then $(MAKE) -C nxcompext $@; fi
+	if test -d nxcompshad; then $(MAKE) -C nxcompshad $@; fi
+	if test -d nxproxy; then $(MAKE) -C nxproxy $@; fi
